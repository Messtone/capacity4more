<?php

include_once 'c4m_user.features.inc';

/**
 * Expose default view modes.
 *
 * This hook is called by CTools. For this hook to work, you need
 * hook_ctools_plugin_api(). The values of this hook can be overridden
 * and reverted through the UI.
 */
function c4m_user_ds_view_modes_info() {
  $ds_view_modes = array();

  $ds_view_mode                   = new stdClass;
  $ds_view_mode->disabled         = FALSE; /* Edit this to true to make a default ds_view_mode disabled initially */
  $ds_view_mode->api_version      = 1;
  $ds_view_mode->view_mode        = 'c4m_user_teaser_list';
  $ds_view_mode->label            = 'User teaser list';
  $ds_view_mode->entities         = array(
    'user' => 'user',
  );
  $ds_view_modes['c4m_user_teaser_list'] = $ds_view_mode;

  $ds_view_mode                   = new stdClass;
  $ds_view_mode->disabled         = FALSE; /* Edit this to true to make a default ds_view_mode disabled initially */
  $ds_view_mode->api_version      = 1;
  $ds_view_mode->view_mode        = 'c4m_user_teaser_table';
  $ds_view_mode->label            = 'User teaser table';
  $ds_view_mode->entities         = array(
    'user' => 'user',
  );
  $ds_view_modes['c4m_user_teaser_table'] = $ds_view_mode;

  return $ds_view_modes;
}

/**
 * Define fields.
 *
 * These fields are not overridden through the interface.
 * If you want those, look at hook_ds_custom_fields_info().
 *
 * @param string $entity_type
 *   The name of the entity which we are requesting fields for, e.g. 'node'.
 *
 * @return array
 *   A collection of fields which keys are the entity type name and values
 *   a collection fields.
 *
 * @see ds_get_fields()
 */
function c4m_user_ds_fields_info($entity_type) {
  $fields = array();

  $path = drupal_get_path('module', 'c4m_user');

  // Fields for entity type user (, within a group)
  $fields['user']['c4m_user_og_membership_type'] = array(
    'title'      => t('OG user membership type'),
    'field_type' => DS_FIELD_TYPE_FUNCTION,
    'ui_limit'   => array('*|*'),
    'file'       => $path . '/includes/c4m_user.theme.inc',
    'function'   => 'theme_c4m_user_og_membership_type',
    'properties' => array(
      'formatters' => array(
        'default' => t('Default'),
      ),
    ),
  );

  return $fields;
}